<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>
  <title>PBJ - The Pepe Miner Casino</title>
  <meta name="description" content="The #1 DeFi Mining Casino on Base." />

  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Rajdhani:wght@600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- External Libs -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <!-- Tailwind Config -->
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            sans: ['"Inter"', 'sans-serif'],
            mono: ['"Rajdhani"', 'monospace'],
          },
          colors: {
            bg: '#020202',
            sidebar: '#080808',
            surface: '#101010',
            primary: '#39FF14',  /* Pepe Neon Green */
            primaryDim: '#2eb312',
            gold: '#FFD700',     
            danger: '#FF4949',
          },
          animation: {
            'marquee': 'marquee 30s linear infinite',
            'bounce-short': 'bounce-short 0.5s infinite',
            'pulse-glow': 'pulse-glow 2s infinite',
            'float': 'float 10s infinite ease-in-out',
            'scanline': 'scanline 8s linear infinite',
          },
          keyframes: {
            marquee: { '0%': { transform: 'translateX(0%)' }, '100%': { transform: 'translateX(-100%)' } },
            'bounce-short': { '0%, 100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-5px)' } },
            'pulse-glow': { '0%, 100%': { boxShadow: '0 0 5px #39FF14' }, '50%': { boxShadow: '0 0 20px #39FF14' } },
            float: { '0%, 100%': { transform: 'translateY(0) translateX(0)' }, '50%': { transform: 'translateY(-20px) translateX(10px)' } },
            scanline: { '0%': { transform: 'translateY(-100%)' }, '100%': { transform: 'translateY(100%)' } }
          }
        }
      }
    }
  </script>

  <!-- Custom CSS -->
  <link rel="stylesheet" href="css/styles.css">
</head>
<body class="flex h-screen text-sm antialiased font-sans selection:bg-primary selection:text-black">

  <!-- CAVE ATMOSPHERE LAYERS -->
  <div class="cave-vignette"></div>
  <div class="scanlines"></div>
  <div class="torch-effect" id="torch"></div>
  <div id="dust-container" class="absolute inset-0 overflow-hidden pointer-events-none z-0"></div>

  <!-- ASSETS: AUDIO -->
  <div id="audio-container" class="hidden">
      <audio id="sfx-click" src="https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3" preload="auto"></audio>
      <audio id="sfx-spin" src="https://assets.mixkit.co/active_storage/sfx/2003/2003-preview.mp3" preload="auto"></audio>
      <audio id="sfx-win" src="https://assets.mixkit.co/active_storage/sfx/2019/2019-preview.mp3" preload="auto"></audio>
      <audio id="sfx-lose" src="https://assets.mixkit.co/active_storage/sfx/203/203-preview.mp3" preload="auto"></audio>
  </div>

  <div id="toast-container" class="fixed bottom-5 right-5 z-[10000] flex flex-col gap-2"></div>

  <!-- AUTH MODAL (ROLLBIT STYLE) -->
  <div id="authModal" class="fixed inset-0 bg-black/90 backdrop-blur-md z-[10000] hidden items-center justify-center p-4">
      <div class="glass-panel w-full max-w-md rounded-lg shadow-2xl border border-[#333] overflow-hidden flex flex-col relative">
          <button onclick="toggleAuthModal()" class="absolute top-4 right-4 text-gray-500 hover:text-white"><i class="fas fa-times"></i></button>
          
          <div class="p-8 pb-4 text-center">
              <h2 class="text-2xl font-bold text-white mb-1 font-mono">WELCOME MINER</h2>
              <p class="text-gray-400 text-xs">Login to sync your progress and mining rewards.</p>
          </div>

          <div class="px-8 mb-6">
              <div class="flex border-b border-[#222]">
                  <div class="auth-tab active" onclick="switchAuthTab('login')">LOGIN</div>
                  <div class="auth-tab" onclick="switchAuthTab('register')">REGISTER</div>
              </div>
          </div>

          <div id="authContent" class="px-8 pb-8">
              <!-- Web3 -->
              <button id="modalConnectBtn" class="auth-btn metamask">
                  <img src="https://upload.wikimedia.org/wikipedia/commons/3/36/MetaMask_Fox.svg" class="w-5 h-5">
                  METAMASK (WEB3)
              </button>
              
              <div class="flex items-center my-4">
                  <div class="flex-1 h-px bg-[#222]"></div>
                  <span class="px-3 text-[10px] text-gray-500 uppercase font-bold">Or with Socials</span>
                  <div class="flex-1 h-px bg-[#222]"></div>
              </div>

              <!-- Steam (Simulated) -->
              <button onclick="toast('Steam Login Temporarily Disabled', 'error')" class="auth-btn">
                  <i class="fab fa-steam text-lg"></i>
                  STEAM
              </button>
              
              <!-- Google/Email (Simulated) -->
              <button onclick="toast('Email Service Busy', 'error')" class="auth-btn">
                  <i class="fab fa-google text-lg"></i>
                  GOOGLE
              </button>
              
              <p class="text-[10px] text-center text-gray-600 mt-4">
                  By logging in, you agree to the Terms of Service.
              </p>
          </div>
      </div>
  </div>

  <!-- GAME MODAL -->
  <div id="gameModal" class="fixed inset-0 bg-black/90 backdrop-blur-md z-[9990] hidden items-center justify-center p-4">
    <div class="glass-panel w-full max-w-xl rounded-lg shadow-[0_0_50px_rgba(57,255,20,0.1)] border border-[#333] overflow-hidden flex flex-col max-h-[90vh] relative">
        
        <!-- Tutorial Overlay -->
        <div id="tutorialOverlay" class="absolute inset-0 bg-black/95 z-50 hidden flex-col p-8 items-center justify-center text-center">
            <i class="fas fa-scroll text-4xl text-gold mb-4"></i>
            <h3 class="text-2xl font-bold text-white mb-2 font-mono text-primary" id="tutTitle">MINING RULES</h3>
            <p class="text-gray-300 mb-6 max-w-md leading-relaxed font-mono text-xs" id="tutText">...</p>
            <button onclick="toggleTutorial()" class="btn-primary px-6 py-2">I UNDERSTAND</button>
        </div>

        <!-- Header -->
        <div class="bg-black/60 p-4 flex justify-between items-center border-b border-[#333]">
            <div class="flex items-center gap-3">
                <span id="modalIcon" class="text-2xl drop-shadow-[0_0_5px_rgba(255,255,255,0.3)]">ðŸŽ°</span>
                <div><h2 id="modalTitle" class="text-primary font-bold text-lg uppercase tracking-wide font-mono">GAME</h2></div>
            </div>
            <div class="flex gap-2">
                <button onclick="toggleTutorial()" class="text-xs bg-[#111] hover:text-primary text-gray-300 px-3 py-1 rounded border border-[#333]"><i class="fas fa-info-circle mr-1"></i> INFO</button>
                <button onclick="closeGame()" class="text-gray-500 hover:text-red-500 transition w-8 h-8 flex items-center justify-center rounded hover:bg-[#111]"><i class="fas fa-times"></i></button>
            </div>
        </div>

        <!-- Visual Stage -->
        <div class="flex-1 bg-black/40 relative p-8 flex flex-col items-center justify-center overflow-y-auto min-h-[320px] shadow-inner">
            <div class="absolute inset-0 opacity-10 pointer-events-none" style="background-image: radial-gradient(#39FF14 1px, transparent 1px); background-size: 30px 30px;"></div>
            <div id="innerGameContent" class="w-full flex flex-col items-center justify-center transition-all duration-300 relative z-10">
                <!-- Content Injected Here -->
            </div>
        </div>
        
        <!-- Status Bar -->
        <div class="bg-black py-2 border-t border-[#333]">
             <div id="gameStatus" class="text-center text-xs font-mono font-bold uppercase tracking-[0.2em] text-gray-500">WAITING FOR SIGNAL...</div>
        </div>

        <!-- Controls -->
        <div class="bg-[#0a0a0a] p-5 border-t border-[#333]">
            <div class="flex flex-col gap-4">
                <div id="gameExtraControls" class="hidden flex gap-2 w-full justify-center"></div>
                <div class="grid grid-cols-[1.5fr_1fr] gap-4">
                    <div class="bg-[#050505] p-2 rounded border border-[#333] focus-within:border-primary transition flex flex-col justify-center relative">
                        <div class="flex justify-between px-2 text-[10px] text-gray-400 uppercase font-bold">
                            <span>Bet (PBJ)</span>
                            <span class="text-gold font-mono cursor-pointer hover:underline" onclick="setMaxBet()">MAX</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-gem text-primary ml-2"></i>
                            <input type="number" id="gameBetInput" value="100" min="1" class="bg-transparent w-full text-white font-mono font-bold text-lg focus:outline-none" placeholder="0.00">
                        </div>
                    </div>
                    <button id="gameActionBtn" class="btn-primary w-full h-full text-lg">START MINE</button>
                </div>
                <div class="flex justify-between text-[10px] text-gray-500 uppercase font-bold px-1">
                    <span>Vault Balance:</span>
                    <span><span id="modalBalance" class="text-primary font-mono text-sm">0</span> PBJ</span>
                </div>
            </div>
        </div>
    </div>
  </div>

  <!-- SIDEBAR (Desktop) -->
  <aside id="sidebar" class="hidden md:flex w-64 flex-col bg-sidebar border-r border-[#333] flex-shrink-0 z-20 relative h-full glass-panel">
    <div class="h-16 flex items-center px-6 border-b border-[#333] relative z-10">
      <div class="w-8 h-8 bg-primary rounded flex items-center justify-center mr-3 text-black font-bold text-lg shadow-[0_0_10px_#39FF14]">P</div>
      <span class="text-white font-bold text-xl tracking-tight font-mono">PEPE<span class="text-primary">.MINER</span></span>
    </div>

    <div class="flex-1 overflow-y-auto py-6 px-3 space-y-1 relative z-10">
      <div class="px-3 mb-2 text-xs font-bold text-gray-600 uppercase tracking-wider">Operations</div>
      <a href="#games" onclick="closeMobileMenu()" class="flex items-center px-3 py-2.5 bg-[#111] text-white rounded border-l-2 border-primary hover:bg-[#222] transition"><i class="fas fa-dungeon w-6 text-primary"></i> <span class="font-medium">Mining Shaft</span></a>
      <a href="#presale" onclick="closeMobileMenu()" class="flex items-center px-3 py-2.5 text-gray-400 hover:text-white hover:bg-[#111] rounded transition"><i class="fas fa-bolt w-6 text-gold"></i> <span class="font-medium">Early Access</span> <span class="ml-auto bg-primary text-black text-[9px] font-bold px-1.5 py-0.5 rounded">LIVE</span></a>
      <a href="#minting" onclick="closeMobileMenu()" class="flex items-center px-3 py-2.5 text-gray-400 hover:text-white hover:bg-[#111] rounded transition"><i class="fas fa-users w-6"></i> <span class="font-medium">Hire Miners (NFT)</span></a>
      <a href="#staking" onclick="closeMobileMenu()" class="flex items-center px-3 py-2.5 text-gray-400 hover:text-white hover:bg-[#111] rounded transition"><i class="fas fa-lock w-6"></i> <span class="font-medium">The Vault</span></a>
      <a href="#partners" onclick="closeMobileMenu()" class="flex items-center px-3 py-2.5 text-gray-400 hover:text-white hover:bg-[#111] rounded transition"><i class="fas fa-handshake w-6"></i> <span class="font-medium">Guilds</span></a>
    </div>
  </aside>

  <!-- MOBILE MENU OVERLAY -->
  <div id="mobileMenuOverlay" class="fixed inset-0 bg-black/80 z-10 hidden md:hidden" onclick="closeMobileMenu()"></div>

  <!-- MAIN CONTENT -->
  <div class="flex-1 flex flex-col h-screen overflow-hidden relative z-10">
    
    <!-- NAVBAR -->
    <header class="h-16 bg-black/60 backdrop-blur border-b border-[#333] flex items-center justify-between px-4 sticky top-0 z-30">
      <div class="flex items-center gap-4">
          <button id="mobileMenuBtn" class="md:hidden text-gray-300 hover:text-white"><i class="fas fa-bars text-xl"></i></button>
          <div class="md:hidden w-8 h-8 bg-primary rounded flex items-center justify-center font-bold text-black">P</div>
      </div>
      
      <div class="hidden md:flex items-center gap-2 bg-[#111] border border-[#333] px-3 py-1.5 rounded-full">
          <span class="relative flex h-2 w-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span><span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span></span>
          <span class="text-xs font-mono font-bold text-gray-400"><span class="text-white">1,420</span> Miners Online</span>
      </div>

      <div class="flex items-center gap-3">
         <!-- Mute Button -->
         <button id="muteBtn" class="w-8 h-8 rounded bg-[#111] border border-[#333] text-gray-400 hover:text-white flex items-center justify-center transition">
            <i class="fas fa-volume-up"></i>
         </button>

         <div id="walletDisplay" class="hidden flex-col items-end mr-1">
            <div class="bg-[#111] px-3 py-1 rounded border border-[#333] flex items-center gap-2">
                <span id="headerBalance" class="text-white font-mono font-bold text-sm">0</span>
                <span class="text-primary text-xs font-bold">PBJ</span>
            </div>
        </div>
        <!-- ROLLBIT STYLE LOGIN BUTTON -->
        <button id="loginBtn" onclick="toggleAuthModal()" class="btn-primary px-4 py-2 text-xs md:text-sm shadow-[0_0_10px_rgba(57,255,20,0.2)]">LOGIN</button>
        <button id="connectBtn" class="hidden btn-primary px-4 py-2 text-xs md:text-sm shadow-[0_0_10px_rgba(57,255,20,0.2)]"><i class="fas fa-wallet mr-1"></i> CONNECT PICKAXE</button>
      </div>
    </header>

        <!-- CONTENT WRAPPER -->
    <div class="flex-1 overflow-hidden relative flex">
        
        <main class="flex-1 overflow-y-auto scroll-smooth pb-20 relative">
            
            <!-- LIVE FEED SECTION (ROLLBIT STYLE - ENHANCED) -->
            <div id="liveFeedSection" class="border-b border-[#222] bg-[#050505]">
                <div class="flex items-center justify-between px-4 py-2 border-b border-[#111]">
                    <div class="flex items-center gap-2">
                        <div class="w-2 h-2 bg-primary rounded-full animate-pulse"></div>
                        <span class="text-[10px] font-bold text-gray-400 font-mono uppercase">Live Excavations</span>
                    </div>
                </div>
                <div class="overflow-hidden h-[180px] relative">
                     <div class="absolute bottom-0 left-0 w-full h-8 bg-gradient-to-t from-[#050505] to-transparent z-10 pointer-events-none"></div>
                     <table class="w-full live-table">
                         <thead><tr><th>Game</th><th>Miner</th><th>Bet</th><th>Mult</th><th>Payout</th></tr></thead>
                         <tbody id="liveFeedBody"></tbody>
                     </table>
                </div>
            </div>

    <!-- MAIN SCROLL -->
    <main class="flex-1 overflow-y-auto relative scroll-smooth">
      
      <!-- PRESALE HERO -->
      <div id="presale" class="p-4 md:p-8 pb-0">
          <section class="relative rounded-xl overflow-hidden glass-panel shadow-2xl border border-[#333]">
            <!-- Background Image -->
            <div class="absolute inset-0 z-0">
                <img src="assets/img/hero-pepe.png" alt="Pepe Miner Hero" class="w-full h-full object-cover opacity-20" onerror="this.style.display='none'">
                <div class="absolute inset-0 bg-gradient-to-r from-black via-black/90 to-transparent"></div>
            </div>
            
            <div class="absolute top-0 left-0 w-full bg-primary/10 border-b border-primary/30 text-center py-1 z-20 backdrop-blur-sm">
                <p class="text-[10px] md:text-xs font-bold text-primary font-mono animate-pulse">
                    âš¡ GOLD RUSH: +25% BONUS ORE ENDS IN <span id="bonusTimer" class="text-white">01:59:59</span> âš¡
                </p>
            </div>

            <div class="relative z-10 grid md:grid-cols-2 gap-8 p-6 md:p-10 pt-16 items-center">
                <!-- Left Text -->
                <div class="space-y-5">
                    <div class="inline-block bg-gold/20 border border-gold text-gold px-3 py-1 rounded text-[10px] font-bold tracking-widest uppercase mb-2">Phase 1 Excavation</div>
                    <h1 class="text-4xl md:text-6xl font-bold text-white leading-none font-mono">
                        DIG FOR <span class="text-primary text-shadow shadow-green-500">PBJ GOLD</span>
                    </h1>
                    <p class="text-gray-400 text-sm md:text-base max-w-md">
                        Join the underground revolution. The only casino that shares revenue with miners.
                    </p>
                    
                    <!-- PRICE ALERT -->
                    <div class="bg-red-900/20 border-l-4 border-red-500 p-4 rounded max-w-md backdrop-blur-sm">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-chart-line text-red-500 mt-1"></i>
                            <div>
                                <h4 class="text-red-500 font-bold text-xs uppercase font-mono">INSANE UPSIDE POTENTIAL</h4>
                                <p class="text-gray-300 text-xs mt-1">Current Price: <span class="text-primary font-bold">$0.0035</span></p>
                                <p class="text-gray-300 text-xs">Listing Price: <span class="text-white font-bold">$0.35</span></p>
                                <p class="text-gold font-bold text-xs mt-1 animate-pulse">POTENTIAL 100x GAINS â€¢ STAKE NFTs IMMEDIATELY</p>
                            </div>
                        </div>
                    </div>

                    <div class="flex gap-4 font-mono text-center pt-4">
                        <div class="bg-black/60 p-3 rounded border border-[#333] min-w-[70px]"><span id="d" class="text-3xl font-bold text-primary">5</span><div class="text-[9px] text-gray-500">DAYS</div></div>
                        <div class="bg-black/60 p-3 rounded border border-[#333] min-w-[70px]"><span id="h" class="text-3xl font-bold text-white">00</span><div class="text-[9px] text-gray-500">HRS</div></div>
                        <div class="bg-black/60 p-3 rounded border border-[#333] min-w-[70px]"><span id="m" class="text-3xl font-bold text-white">00</span><div class="text-[9px] text-gray-500">MINS</div></div>
                    </div>
                </div>

                <!-- Right Swap Card -->
                <div class="bg-[#050505] backdrop-blur p-1 rounded-xl shadow-[0_0_30px_rgba(57,255,20,0.15)] max-w-sm mx-auto w-full border border-[#333] relative">
                    <!-- Swap Tabs -->
                    <div class="flex border-b border-[#222]">
                        <button id="tabBuy" onclick="switchSwapTab('buy')" class="swap-tab active flex-1 py-3 text-sm font-bold font-mono text-center">BUY $PBJ</button>
                        <button id="tabSell" onclick="switchSwapTab('sell')" class="swap-tab flex-1 py-3 text-sm font-bold font-mono text-center flex items-center justify-center gap-2">SELL <i class="fas fa-lock text-xs"></i></button>
                    </div>

                    <!-- Buy Section -->
                    <div id="swapBuy" class="p-6 space-y-4">
                        <!-- Input ETH -->
                        <div class="bg-[#111] rounded-lg p-3 border border-[#333] hover:border-[#444] transition-colors">
                            <div class="flex justify-between text-[10px] text-gray-400 font-bold mb-1 font-mono">
                                <span>YOU PAY</span>
                                <span>BAL: <span id="ethBalDisplay">0.00</span> ETH</span>
                            </div>
                            <div class="flex items-center gap-3">
                                <input type="number" id="buyInputETH" class="bg-transparent w-full text-2xl font-bold text-white outline-none placeholder-gray-600 font-mono" placeholder="0.0">
                                <div class="bg-black border border-[#333] px-2 py-1 rounded flex items-center gap-2">
                                    <i class="fab fa-ethereum text-gray-300"></i> <span class="font-bold text-sm">ETH</span>
                                </div>
                            </div>
                        </div>

                        <!-- Arrow -->
                        <div class="flex justify-center -my-2 relative z-10">
                            <div class="bg-[#222] border border-[#333] rounded-full p-1.5 shadow-lg">
                                <i class="fas fa-arrow-down text-primary text-xs"></i>
                            </div>
                        </div>

                        <!-- Output PBJ -->
                        <div class="bg-[#111] rounded-lg p-3 border border-[#333] hover:border-[#444] transition-colors">
                            <div class="flex justify-between text-[10px] text-gray-400 font-bold mb-1 font-mono">
                                <span>YOU RECEIVE</span>
                                <span class="text-primary">1 ETH â‰ˆ 1M PBJ</span>
                            </div>
                            <div class="flex items-center gap-3">
                                <input type="number" id="buyInputPBJ" class="bg-transparent w-full text-2xl font-bold text-primary outline-none placeholder-green-900 font-mono" placeholder="0.0">
                                <div class="bg-black border border-[#333] px-2 py-1 rounded flex items-center gap-2">
                                    <span class="text-primary font-bold text-sm">PBJ</span>
                                </div>
                            </div>
                        </div>

                        <button id="buyBtn" class="w-full btn-primary py-4 mt-2 text-sm tracking-widest shadow-[0_0_15px_rgba(57,255,20,0.3)]">MINT TOKENS</button>
                        <p class="text-[10px] text-center text-gray-500 font-mono mt-2">Slippage: Auto â€¢ Gas: Market</p>
                    </div>

                    <!-- Sell Section (Locked) -->
                    <div id="swapSell" class="p-6 space-y-4 hidden flex flex-col items-center justify-center min-h-[300px] text-center">
                        <div class="w-16 h-16 bg-[#111] rounded-full flex items-center justify-center mb-4 border border-red-900/50 shadow-[0_0_20px_rgba(255,0,0,0.2)]">
                            <i class="fas fa-lock text-red-500 text-2xl"></i>
                        </div>
                        <h3 class="text-white font-bold font-mono text-lg">TRADING LOCKED</h3>
                        <p class="text-gray-500 text-xs max-w-[200px]">Selling is disabled during Presale Phase 1. Use this time to stake your PBJ for high APY.</p>
                        <div class="w-full bg-[#111] p-3 rounded border border-[#333] mt-4">
                            <div class="flex justify-between text-xs mb-1">
                                <span class="text-gray-400">Launch Price</span>
                                <span class="text-white font-bold">$0.35</span>
                            </div>
                            <div class="flex justify-between text-xs">
                                <span class="text-gray-400">Time until unlock</span>
                                <span class="text-primary font-bold">~14 Days</span>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
          </section>
      </div>

      <!-- TICKER -->
      <div class="mt-8 border-y border-[#222] bg-black/50 backdrop-blur-sm">
          <div class="ticker-wrap">
              <div class="ticker">
                  <div class="ticker-item"><i class="fas fa-hammer text-primary mr-2"></i> User 0x...4a dug up 500 PBJ in Slots</div>
                  <div class="ticker-item"><i class="fas fa-gem text-gold mr-2"></i> PepeKing minted a Legendary Miner</div>
                  <div class="ticker-item"><i class="fas fa-bomb text-red-500 mr-2"></i> User 0x...ff survived Mines with 150 PBJ</div>
                  <div class="ticker-item"><i class="fas fa-rocket text-blue-400 mr-2"></i> MoonBoy cashed out 2000 PBJ on Crash</div>
              </div>
          </div>
      </div>

      <!-- GAMES -->
      <section id="games" class="p-4 md:p-8">
        <h2 class="text-xl font-bold text-white flex items-center gap-2 mb-6 font-mono"><i class="fas fa-dungeon text-primary"></i> MINING SHAFT (GAMES)</h2>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6">
            <div onclick="openGame('blackjack')" class="glass-panel group cursor-pointer bg-[#111] rounded-lg overflow-hidden aspect-[3/4] hover:-translate-y-1 transition shadow-lg relative border border-[#333] hover:border-primary">
                <img src="assets/img/game-blackjack.png" class="w-full h-full object-cover opacity-60 group-hover:opacity-100 transition duration-500" onerror="this.src='https://placehold.co/400x600/111/333?text=Blackjack'">
                <div class="absolute bottom-0 w-full bg-gradient-to-t from-black to-transparent p-4"><h3 class="text-white font-bold font-mono text-lg">CAVE BLACKJACK</h3><p class="text-[10px] text-primary">Beat the Dealer</p></div>
            </div>
            <div onclick="openGame('slots')" class="glass-panel group cursor-pointer bg-[#111] rounded-lg overflow-hidden aspect-[3/4] hover:-translate-y-1 transition shadow-lg relative border border-[#333] hover:border-primary">
                <img src="assets/img/game-slots.png" class="w-full h-full object-cover opacity-60 group-hover:opacity-100 transition duration-500" onerror="this.src='https://placehold.co/400x600/111/333?text=Slots'">
                <div class="absolute bottom-0 w-full bg-gradient-to-t from-black to-transparent p-4"><h3 class="text-white font-bold font-mono text-lg">GEM SLOTS</h3><p class="text-[10px] text-primary">Spin & Win</p></div>
            </div>
            <div onclick="openGame('mines')" class="glass-panel group cursor-pointer bg-[#111] rounded-lg overflow-hidden aspect-[3/4] hover:-translate-y-1 transition shadow-lg relative border border-[#333] hover:border-primary">
                <img src="assets/img/game-mines.png" class="w-full h-full object-cover opacity-60 group-hover:opacity-100 transition duration-500" onerror="this.src='https://placehold.co/400x600/111/333?text=Mines'">
                <div class="absolute bottom-0 w-full bg-gradient-to-t from-black to-transparent p-4"><h3 class="text-white font-bold font-mono text-lg">MINEFIELD</h3><p class="text-[10px] text-primary">Don't Explode</p></div>
            </div>
            <div onclick="openGame('crash')" class="glass-panel group cursor-pointer bg-[#111] rounded-lg overflow-hidden aspect-[3/4] hover:-translate-y-1 transition shadow-lg relative border border-[#333] hover:border-primary">
                <img src="assets/img/game-crash.png" class="w-full h-full object-cover opacity-60 group-hover:opacity-100 transition duration-500" onerror="this.src='https://placehold.co/400x600/111/333?text=Crash'">
                <div class="absolute bottom-0 w-full bg-gradient-to-t from-black to-transparent p-4"><h3 class="text-white font-bold font-mono text-lg">ROCKET CART</h3><p class="text-[10px] text-primary">To The Moon</p></div>
            </div>
            <div onclick="openGame('roulette')" class="glass-panel group cursor-pointer bg-[#111] rounded-lg overflow-hidden aspect-[3/4] hover:-translate-y-1 transition shadow-lg relative border border-[#333] hover:border-primary">
                <img src="assets/img/game-roulette.png" class="w-full h-full object-cover opacity-60 group-hover:opacity-100 transition duration-500" onerror="this.src='https://placehold.co/400x600/111/333?text=Roulette'">
                <div class="absolute bottom-0 w-full bg-gradient-to-t from-black to-transparent p-4"><h3 class="text-white font-bold font-mono text-lg">DRILL ROULETTE</h3><p class="text-[10px] text-primary">Spin the Wheel</p></div>
            </div>
            <div onclick="openGame('plinko')" class="glass-panel group cursor-pointer bg-[#111] rounded-lg overflow-hidden aspect-[3/4] hover:-translate-y-1 transition shadow-lg relative border border-[#333] hover:border-primary">
                <img src="assets/img/game-plinko.png" class="w-full h-full object-cover opacity-60 group-hover:opacity-100 transition duration-500" onerror="this.src='https://placehold.co/400x600/111/333?text=Plinko'">
                <div class="absolute bottom-0 w-full bg-gradient-to-t from-black to-transparent p-4"><h3 class="text-white font-bold font-mono text-lg">GEM DROP</h3><p class="text-[10px] text-primary">Falling Riches</p></div>
            </div>
            <div onclick="openGame('keno')" class="glass-panel group cursor-pointer bg-[#111] rounded-lg overflow-hidden aspect-[3/4] hover:-translate-y-1 transition shadow-lg relative border border-[#333] hover:border-primary">
                <img src="assets/img/game-keno.png" class="w-full h-full object-cover opacity-60 group-hover:opacity-100 transition duration-500" onerror="this.src='https://placehold.co/400x600/111/333?text=Keno'">
                <div class="absolute bottom-0 w-full bg-gradient-to-t from-black to-transparent p-4"><h3 class="text-white font-bold font-mono text-lg">ORE SCANNER</h3><p class="text-[10px] text-primary">Find the Vein</p></div>
            </div>
            <div onclick="openGame('tower')" class="glass-panel group cursor-pointer bg-[#111] rounded-lg overflow-hidden aspect-[3/4] hover:-translate-y-1 transition shadow-lg relative border border-[#333] hover:border-primary">
                <img src="assets/img/game-tower.png" class="w-full h-full object-cover opacity-60 group-hover:opacity-100 transition duration-500" onerror="this.src='https://placehold.co/400x600/111/333?text=Tower'">
                <div class="absolute bottom-0 w-full bg-gradient-to-t from-black to-transparent p-4"><h3 class="text-white font-bold font-mono text-lg">MINE SHAFT</h3><p class="text-[10px] text-primary">Climb Up</p></div>
            </div>
        </div>
      </section>

      <!-- NFT COLLECTION -->
      <section id="minting" class="p-4 md:p-8 bg-black/40 border-y border-[#222] relative">
          <div class="absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-primary/5 via-transparent to-transparent pointer-events-none"></div>
          <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-2 font-mono relative z-10"><i class="fas fa-users text-primary"></i> HIRE YOUR MINING CREW (NFTs)</h2>
          
          <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 gap-4 mb-10 relative z-10">
              <!-- Common -->
              <div class="nft-card rounded-lg p-3 flex flex-col items-center text-center" style="--border-color: #A0AEC0; --glow-color: rgba(160, 174, 192, 0.3);">
                  <div class="w-full aspect-square bg-[#222] rounded mb-3 overflow-hidden">
                      <img src="assets/img/nft-common.png" class="w-full h-full object-cover" onerror="this.src='https://placehold.co/300x300/333/FFF?text=ROOKIE'">
                  </div>
                  <h3 class="text-white font-bold uppercase text-sm font-mono">ROOKIE MINER</h3>
                  <div class="text-[10px] text-gray-400 mb-2">APY: 50% | Common</div>
                  <div class="mt-auto w-full">
                      <div class="text-primary font-mono font-bold text-sm mb-2">5,000 PBJ</div>
                      <button onclick="mintNFT(0)" class="w-full bg-[#333] hover:bg-gray-600 text-white py-2 rounded text-xs font-bold transition border border-gray-600">HIRE</button>
                  </div>
              </div>

              <!-- Uncommon -->
              <div class="nft-card rounded-lg p-3 flex flex-col items-center text-center" style="--border-color: #48BB78; --glow-color: rgba(72, 187, 120, 0.3);">
                  <div class="w-full aspect-square bg-[#222] rounded mb-3 overflow-hidden">
                      <img src="assets/img/nft-uncommon.png" class="w-full h-full object-cover" onerror="this.src='https://placehold.co/300x300/333/48BB78?text=WORKER'">
                  </div>
                  <h3 class="text-[#48BB78] font-bold uppercase text-sm font-mono">HARD WORKER</h3>
                  <div class="text-[10px] text-gray-400 mb-2">APY: 120% | Uncommon</div>
                  <div class="mt-auto w-full">
                      <div class="text-primary font-mono font-bold text-sm mb-2">15,000 PBJ</div>
                      <button onclick="mintNFT(1)" class="w-full bg-green-900/30 hover:bg-green-900/50 text-white py-2 rounded text-xs font-bold transition border border-green-800">HIRE</button>
                  </div>
              </div>

              <!-- Rare -->
              <div class="nft-card rounded-lg p-3 flex flex-col items-center text-center" style="--border-color: #4299E1; --glow-color: rgba(66, 153, 225, 0.3);">
                  <div class="w-full aspect-square bg-[#222] rounded mb-3 overflow-hidden">
                      <img src="assets/img/nft-rare.png" class="w-full h-full object-cover" onerror="this.src='https://placehold.co/300x300/333/4299E1?text=ENGINEER'">
                  </div>
                  <h3 class="text-[#4299E1] font-bold uppercase text-sm font-mono">ENGINEER</h3>
                  <div class="text-[10px] text-gray-400 mb-2">APY: 350% | Rare</div>
                  <div class="mt-auto w-full">
                      <div class="text-primary font-mono font-bold text-sm mb-2">40,000 PBJ</div>
                      <button onclick="mintNFT(2)" class="w-full bg-blue-900/30 hover:bg-blue-900/50 text-white py-2 rounded text-xs font-bold transition border border-blue-800">HIRE</button>
                  </div>
              </div>

              <!-- Epic -->
              <div class="nft-card rounded-lg p-3 flex flex-col items-center text-center" style="--border-color: #9F7AEA; --glow-color: rgba(159, 122, 234, 0.3);">
                  <div class="w-full aspect-square bg-[#222] rounded mb-3 overflow-hidden">
                      <img src="assets/img/nft-epic.png" class="w-full h-full object-cover" onerror="this.src='https://placehold.co/300x300/333/9F7AEA?text=FOREMAN'">
                  </div>
                  <h3 class="text-[#9F7AEA] font-bold uppercase text-sm font-mono">FOREMAN</h3>
                  <div class="text-[10px] text-gray-400 mb-2">APY: 800% | Epic</div>
                  <div class="mt-auto w-full">
                      <div class="text-primary font-mono font-bold text-sm mb-2">100,000 PBJ</div>
                      <button onclick="mintNFT(3)" class="w-full bg-purple-900/30 hover:bg-purple-900/50 text-white py-2 rounded text-xs font-bold transition border border-purple-800">HIRE</button>
                  </div>
              </div>

              <!-- Legendary -->
              <div class="nft-card rounded-lg p-3 flex flex-col items-center text-center border-2 border-gold shadow-[0_0_15px_rgba(255,215,0,0.1)]" style="--border-color: #FFD700; --glow-color: rgba(255, 215, 0, 0.5);">
                  <div class="w-full aspect-square bg-[#222] rounded mb-3 overflow-hidden">
                      <img src="assets/img/nft-legendary.png" class="w-full h-full object-cover" onerror="this.src='https://placehold.co/300x300/333/FFD700?text=KING'">
                  </div>
                  <h3 class="text-gold font-bold uppercase text-sm font-mono drop-shadow-md">MINE KING</h3>
                  <div class="text-[10px] text-gray-400 mb-2">APY: 2000% | Legendary</div>
                  <div class="mt-auto w-full">
                      <div class="text-primary font-mono font-bold text-sm mb-2">250,000 PBJ</div>
                      <button onclick="mintNFT(4)" class="w-full bg-gradient-to-b from-gold to-yellow-600 text-black py-2 rounded text-xs font-bold transition hover:scale-105 shadow-[0_0_10px_#FFD700]">HIRE KING</button>
                  </div>
              </div>
          </div>

        <!-- RIGHT SIDEBAR (CHAT) -->
        <aside id="chatSidebar" class="w-72 bg-sidebar border-l border-[#222] flex flex-col z-20 transition-all duration-300 transform translate-x-0 hidden md:flex">
            <div class="h-12 border-b border-[#222] flex items-center justify-between px-3 bg-[#0a0a0a]">
                <div class="flex items-center gap-2">
                    <div class="w-2 h-2 rounded-full bg-green-500"></div>
                    <span class="text-xs font-bold text-gray-300 font-mono">CAVE CHAT</span>
                </div>
                <button onclick="toggleChat()" class="text-gray-500 hover:text-white md:hidden"><i class="fas fa-times"></i></button>
            </div>
            <div id="chatContainer" class="flex-1 overflow-y-auto p-3 space-y-2 relative">
                <div class="text-center text-[10px] text-gray-600 my-4">--- Welcome to the Cave ---</div>
            </div>
            <div class="p-3 bg-[#0a0a0a] border-t border-[#222]">
                 <div class="relative">
                     <input type="text" id="chatInput" class="bg-[#151515] border border-[#333] text-gray-200 text-xs rounded w-full py-2.5 px-3 pr-8 outline-none focus:border-primary transition" placeholder="Say something..." onkeypress="handleChatKey(event)">
                     <button onclick="sendChat()" class="absolute right-2 top-2 text-gray-500 hover:text-primary"><i class="fas fa-paper-plane"></i></button>
                 </div>
            </div>
        </aside>

          <!-- Staking Interface -->
          <div id="staking" class="glass-panel border border-[#333] rounded-xl p-6 relative overflow-hidden">
              <div class="absolute top-0 right-0 w-64 h-64 bg-primary/5 rounded-full blur-[100px] pointer-events-none"></div>
              <div class="flex justify-between items-center mb-6 relative z-10">
                  <h2 class="text-xl font-bold text-white font-mono">THE VAULT (STAKING)</h2>
                  <button onclick="loadUserData()" class="text-xs bg-[#222] hover:bg-[#333] px-3 py-1 rounded text-white border border-[#444]"><i class="fas fa-sync mr-1 text-primary"></i> Refresh</button>
              </div>
              
              <div id="inventory-list" class="bg-[#050505] rounded border border-dashed border-[#333] h-48 overflow-y-auto p-4 mb-4 grid grid-cols-1 gap-2">
                  <p class="text-center text-gray-600 text-xs mt-16 font-mono">CONNECT PICKAXE TO VIEW INVENTORY</p>
              </div>

              <div class="bg-[#0a0a0a] p-4 rounded border border-[#222] flex justify-between items-center relative z-10">
                  <div><p class="text-[10px] text-gray-500 font-bold">TOTAL STAKED</p><p id="total-staked" class="text-white font-bold font-mono text-xl">0</p></div>
                  <div><p class="text-[10px] text-gray-500 font-bold">DAILY YIELD</p><p id="daily-yield" class="text-primary font-bold font-mono text-xl">0 PBJ/d</p></div>
                  <div class="text-right"><p class="text-[10px] text-gray-500 font-bold">UNCLAIMED ORE</p><p id="pending-rewards" class="text-gold font-mono font-bold text-xl text-shadow">0.00</p></div>
              </div>
              <button onclick="claimRewards()" class="w-full mt-4 bg-[#222] hover:bg-white hover:text-black text-white text-xs py-3 rounded font-bold transition border border-[#444] tracking-widest relative z-10">COLLECT YIELD</button>
          </div>
      </section>

      <!-- PARTNERS -->
      <section id="partners" class="p-4 md:p-8 pb-20">
          <h2 class="text-xl font-bold text-white mb-6 text-center font-mono">MINING GUILD (AFFILIATES)</h2>
          
          <div id="partner-locked" class="glass-panel border border-dashed border-[#333] rounded-xl p-10 text-center">
              <i class="fas fa-lock text-4xl text-gray-600 mb-4"></i>
              <h3 class="text-white font-bold font-mono">ACCESS DENIED</h3>
              <p class="text-gray-500 text-sm mb-4">Connect wallet to access your referral link and earn 15% commissions.</p>
          </div>

          <div id="partner-unlocked" class="hidden glass-panel border border-primary/30 rounded-xl p-8 relative">
              <div class="flex flex-col md:flex-row items-center gap-4 bg-[#050505] p-4 rounded border border-[#333]">
                  <div class="flex-1">
                      <label class="text-[10px] text-primary font-bold uppercase">Your Referral Link</label>
                      <input type="text" id="refLinkInput" readonly class="w-full bg-transparent text-gray-300 text-sm outline-none font-mono mt-1" value="https://pbj.bet/?ref=0x...">
                  </div>
                  <button onclick="copyRefLink()" class="bg-primary text-black text-xs font-bold px-6 py-3 rounded hover:scale-105 transition">COPY LINK</button>
              </div>
          </div>
      </section>

      <footer class="bg-black/80 border-t border-[#222] p-8 text-center text-xs text-gray-600 font-mono relative z-10">
          <p>&copy; 2025 PBJ Protocol. Built on Base.</p>
      </footer>
    </main>
  </div>

  <!-- LOGIC SCRIPT -->
  <script type="module" src="js/app.js"></script>
</body>
</html>
